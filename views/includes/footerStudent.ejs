<footer>
    <div class="container">
        <div class="row">
            Made with love by Gaurav and Chinmay &copy; <%= new Date().getFullYear() %>
        </div>
    </div>
</footer>

<div class="modal fade" id="replyModal" tabindex="-1" role="dialog" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">Reply</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>

			<div class="modal-body">
				<form onsubmit="return doPostReply(this);">
					<input type="hidden" name="postId">
					<input type="hidden" name="commentId">
					<textarea name="reply" placeholder="Post your reply"></textarea>
					<button type="submit">Post</button>
				</form>
			</div>
		</div>
	</div>
</div>

<script src="/public/js/jquery-3.3.1.min.js"></script>
<script src="/public/js/script.js"></script>
<script src="/public/js/main.min.js"></script>
<script src="/public/js/socket.io.js"></script>

<script>

window.user = null;

// var socketIO=io("http://localhost:3000");

function getUserStudent() {

    if (localStorage.getItem("accessToken")) {

        var ajax = new XMLHttpRequest();
        ajax.open("POST", "/getUserStudent", true);

        ajax.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {

                var response = JSON.parse(this.responseText);

                if (response.status == "success") {
                    window.user = response.data;

                    if (typeof isUpdateProfileStudent !== "undefined" && isUpdateProfileStudent) {
                        showProfileDataStudent();
                    }

                    if (typeof isAllProjectsStudentPage !== "undefined" && isAllProjectsStudentPage) {
                        // showAddproject();
                        showprojectsfeedstudent();
                    }

                    if (typeof isAddProjectPageStudent !== "undefined" && isAddProjectPageStudent) {
                        showAddprojectStudent();
                        // showprojectsfeed();
                    }

                    // if (typeof isHomePage !== "undefined" && isHomePage) {
                    //     showAddproject();
                    //     showprojectsfeed();
                    // }

                    // if (typeof isMyProjects !== "undefined" && isMyProjects) {
                    //     showCompletedApplicationsfeed();
                    //     showPendingApplicationsfeed();
                    // }

                    // if (typeof isSearchResults !== "undefined" && isSearchResults){
                    //     showSearchResults();
                    // }

                } else {
                    localStorage.removeItem("accessToken");
                }
                showMainMenuStudent();
            }
        };

        var formData = new FormData();
        formData.append("accessToken", localStorage.getItem("accessToken"));
        ajax.send(formData);
    } else {
        showMainMenuStudent();
    }
}

function showMainMenuStudent() {
    var html = "";

    if (localStorage.getItem("accessToken")) {
        html += '<li>';
            html += '<a href="/allProjectsStudent">All projects</a> ';
        html += '</li>';

        html += '<li>';
            html += '<a href="/allotedProjects">Alloted projects</a> ';
        html += '</li>';

        html += '<li>';
            html += '<a href="/myProposals">My proposals</a> ';
        html += '</li>';

        html += '<li>';
            html += '<a href="/updateProfileStudent">Profile</a>';
        html += '</li>';

        html += '<li>';
            html += '<a href="/logoutStudent" onclick="return doLogoutStudent();">Logout</a>';
        html += '</li>';
    } else {
        html += '<li>';
            html += '<a href="/loginStudent">Login</a>';
        html += '</li>';

        html += '<li>';
            html += '<a href="/signupStudent">Signup</a>';
        html += '</li>';
    }

    document.getElementById("main-menu-student").innerHTML = html;
}

function doLogoutStudent() {
    localStorage.removeItem("accessToken");
    return true;
}

window.onload = function () {
    getUserStudent();
};

window.onerror = function (file, line, error) {
    alert(file + " " + line + " " + error);
};
</script>

</body>

</html>